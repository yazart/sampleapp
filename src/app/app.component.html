<tui-root>
    <div tuiHeader>
      <div tuiTitle>
       <logo />
        <div tuiSubtitle>
          Platform
        </div>
      </div>

      <div tuiAccessories>

        @if (userName$ | async){
          <tui-hosted-dropdown
            #host
            tuiDropdownAlign="right"
            [content]="dropdown"
            [sided]="true"
            [(open)]="open"
          >
<!--            <button-->
<!--              appearance="flat"-->
<!--              iconRight="tuiIconChevronRight"-->
<!--              size="m"-->
<!--              tuiButton-->
<!--              type="button"-->
<!--              [pseudoActive]="open || null"-->
<!--            >-->
<!--              Button-->
<!--            </button>-->
            <tui-avatar
              size="m"
              [text]="(userName$ | async) || ''"
              class="tui-space_vertical-1 tui-space_horizontal-4"
            ></tui-avatar>
          </tui-hosted-dropdown>
          <ng-template
            #dropdown
            let-close="close"
          >
            <tui-data-list>
              <tui-opt-group>
                @for (item of items; track $index) {
                  <button
                    tuiOption
                    [routerLink]="item.route"
                    (click)="host.close()"
                  >
                    <tui-icon [icon]="item.icon"
                    class="tui-space_right-2"
                    ></tui-icon>
                    {{ item.name }}
                  </button>
                }
              </tui-opt-group>
              <tui-opt-group>
                <button
                  tuiOption
                  (click)="logout()"
                >
                  Выход
                </button>
              </tui-opt-group>
            </tui-data-list>
          </ng-template>


        } @else {
          <button
            appearance="flat"
            tuiButton
            size="m"
            type="button"
            class="tui-space_vertical-1 tui-space_horizontal-4"
            [routerLink]="['/auth/login']"
            routerLinkActive="hide"
          >
            Войти
          </button>
        }

      </div>
    </div>
  <router-outlet />
</tui-root>
